webpackJsonp([1],{107:function(t,n){},108:function(t,n){},109:function(t,n){},110:function(t,n){},111:function(t,n){},112:function(t,n){},128:function(t,n,e){function o(t){e(111)}var r=e(5)(e(41),e(137),o,"data-v-5ded250b",null);t.exports=r.exports},129:function(t,n,e){function o(t){e(110)}var r=e(5)(e(36),e(136),o,null,null);t.exports=r.exports},130:function(t,n,e){function o(t){e(109)}var r=e(5)(e(37),e(135),o,null,null);t.exports=r.exports},131:function(t,n,e){function o(t){e(108)}var r=e(5)(e(38),e(134),o,"data-v-385f54a9",null);t.exports=r.exports},132:function(t,n,e){function o(t){e(107)}var r=e(5)(e(39),e(133),o,"data-v-219143e8",null);t.exports=r.exports},133:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement;return(t._self._c||n)("circle",{staticClass:"port",class:t.dragClass+" "+t.dragCandidateClass+" "+t.dragTargetClass,attrs:{cx:t.port.point.x,cy:t.port.point.y,r:t.radius},on:{mouseenter:t.handlemouseenter,mouseleave:t.handlemouseleave}})},staticRenderFns:[]}},134:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"graph",class:""+t.portDraggingClass},[e("svg",{attrs:{width:t.layout.graph().width+2*t.padding,height:t.layout.graph().height+2*t.padding}},[e("g",{attrs:{transform:"translate("+t.padding+", "+t.padding+")"}},[t._l(t.nodes,function(t,n){return e("Node",{key:n,attrs:{node:t}})}),t._v(" "),t._l(t.edges,function(t,n){return e("Edge",{key:n,attrs:{edge:t}})}),t._v(" "),t._l(t.ports,function(n,o){return e("Port",{key:o,attrs:{port:n,radius:t.portRadius,onPortDragStart:t.handlePortDragStart,onPortDrag:t.handlePortDrag,onPortDragEnd:t.handlePortDragEnd,onConnection:t.onConnection}})}),t._v(" "),e("path",{staticClass:"drag-path",attrs:{d:t.dragPathAsSvg}})],2)])])},staticRenderFns:[]}},135:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("g",[e("rect",{staticClass:"node",attrs:{x:t.node.x,y:t.node.y,rx:"5",ry:"5",width:t.node.width,height:t.node.height}}),t._v(" "),e("text",{attrs:{x:t.node.x+t.node.width/2,y:t.node.y+t.node.height/2,"text-anchor":"middle","dominant-baseline":"middle"}},[t._v("\r\n    "+t._s(t.node.label)+"\r\n  ")])])},staticRenderFns:[]}},136:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("g",{staticClass:"edge"},[e("path",{attrs:{d:t.svgPath}})])},staticRenderFns:[]}},137:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("h1",[t._v("vue-port-graph")]),t._v(" "),e("h3",[t._v("Graph")]),t._v(" "),e("PortGraph",{attrs:{graphConfig:t.graphConfig,onConnection:t.handleConnection}}),t._v(" "),e("h3",[t._v("Config")]),t._v(" "),e("pre",[t._v(t._s(JSON.stringify(t.graphConfig,null,2).trim()))])],1)},staticRenderFns:[]}},138:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]}},33:function(t,n,e){"use strict";var o=e(19),r=e(139),a=e(128),i=e.n(a);o.a.use(r.a),n.a=new r.a({routes:[{path:"/",name:"Home",component:i.a}]})},34:function(t,n,e){function o(t){e(112)}var r=e(5)(e(40),e(138),o,null,null);t.exports=r.exports},35:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(19),r=e(34),a=e.n(r),i=e(33);o.a.config.productionTip=!1,new o.a({el:"#app",router:i.a,template:"<App/>",components:{App:a.a}})},36:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"edge",props:{edge:Object},computed:{svgPath:function(){for(var t=this.edge,n=t.points[0],e="M"+n.x+" "+n.y,o=1;o<t.points.length;o++){var r=t.points[o];e+=" L"+r.x+" "+r.y}return e}}}},37:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"node",props:{node:Object}}},38:function(t,n,e){"use strict";function o(){return{start:{x:null,y:null},end:{x:null,y:null}}}Object.defineProperty(n,"__esModule",{value:!0});var r=e(81),a=e.n(r),i=e(127),d=(e.n(i),e(130)),s=e.n(d),u=e(129),p=e.n(u),c=e(132),g=e.n(c),l=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},f={nodeWidth:200,nodeHeight:40,portRadius:10,graphPadding:20,dagre:{nodesep:20}};n.default={name:"PortGraph",data:function(){return{isPortDrag:!1,dragCandidates:[],dragPath:o()}},props:{graphConfig:{type:Object,default:function(){return{nodes:[],edges:[],options:{}}}},onConnection:{type:Function,default:function(){}}},computed:{graphOptions:function(){var t=this.graphConfig.options;return e.i(i.merge)({},f,t)},layout:function(){var t=this,n=this.graphConfig,e=n.nodes,o=n.edges,r=this.graphOptions,i=new a.a.graphlib.Graph;i.setGraph(r.dagre),i.setDefaultEdgeLabel(function(){return{}});var d=0;return e.forEach(function(n){i.setNode(n.id,{label:n.id,width:r.nodeWidth,height:r.nodeHeight}),n.ports.forEach(function(e){if(!t.isPortConnected(e,n.id,o)){var a="dummy_"+d++;i.setNode(a,{width:4*r.portRadius,height:0}),"input"===e.type?i.setEdge(a,n.id,{from:{},to:{nodeId:n.id,portId:e.id}}):i.setEdge(n.id,a,{from:{nodeId:n.id,portId:e.id},to:{}})}})}),o.forEach(function(t){i.setEdge(t.source.nodeId,t.target.nodeId,{from:l({},t.source),to:l({},t.target)})}),a.a.layout(i),i},nodes:function(){var t=this;return this.layout.nodes().map(function(n){return{x:t.nodeX(n),y:t.nodeY(n),width:t.layout.node(n).width,height:t.layout.node(n).height,label:n}}).filter(function(n){return!n.label||!t.isDummyLabel(n.label)})},edges:function(){var t=this;return this.layout.edges().map(function(n){return l({},t.layout.edge(n),{sourceNode:e.i(i.find)(t.nodes,{label:n.v}),targetNode:e.i(i.find)(t.nodes,{label:n.w})})}).filter(function(n){return n.sourceNode&&n.targetNode&&!t.isDummyLabel(n.sourceNode.label)&&!t.isDummyLabel(n.targetNode.label)})},ports:function(){var t=this,n=[];return this.layout.edges().forEach(function(o){var r=t.layout.edge(o),a=o.v,d=o.w;t.isDummyLabel(a)||n.push(l({},r.from,{isCandidate:t.isCandidate(r.from),point:t.layout.edge(o).points[0],type:"source"})),t.isDummyLabel(d)||n.push(l({},r.to,{isCandidate:t.isCandidate(r.to),point:e.i(i.last)(t.layout.edge(o).points),type:"target"}))}),n},padding:function(){return this.graphOptions.graphPadding},portRadius:function(){return this.graphOptions.portRadius},portDraggingClass:function(){return this.isPortDrag?"port-dragging":""},dragPathAsSvg:function(){if(null===this.dragPath.start.x)return"";var t=this.dragPath,n=t.start,e=t.end,o="M"+n.x+" "+n.y;return e&&(o+=" L"+e.x+" "+e.y),o}},methods:{isPortConnected:function(t,n,o){return void 0!==e.i(i.find)(o,function(e){var o="input"===t.type?"target":"source";return e[o].nodeId===n&&e[o].portId===t.id})},isDummyLabel:function(t){return t&&t.indexOf&&t.indexOf("dummy_")>-1},isCandidate:function(t){return void 0!==e.i(i.find)(this.dragCandidates,{nodeId:t.nodeId,portId:t.portId})},nodeX:function(t){return this.layout.node(t).x-this.layout.node(t).width/2},nodeY:function(t){return this.layout.node(t).y-this.layout.node(t).height/2},handlePortDragStart:function(t){this.isPortDrag=!0,this.dragCandidates=this.ports.filter(function(n){return n.type!==t.type&&n.nodeId!==t.nodeId}),this.dragPath={start:l({},t.point)}},handlePortDrag:function(t,n){this.dragPath=l({},this.dragPath,{end:{x:n.x,y:n.y}})},handlePortDragEnd:function(t){this.isPortDrag=!1,this.dragCandidates=[],this.dragPath=o()}},components:{Node:s.a,Edge:p.a,Port:g.a}}},39:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(44),r=e(6);n.default={name:"port",data:function(){return{dragging:!1,mouseover:!1}},props:{port:{type:Object,default:function(){return{isCandidate:!1}}},radius:Number,onPortDragStart:{type:Function,default:function(){}},onPortDrag:{type:Function,default:function(){}},onPortDragEnd:{type:Function,default:function(){}},onConnection:{type:Function,default:function(){}}},computed:{dragClass:function(){return this.dragging?"dragging":""},dragCandidateClass:function(){return this.port.isCandidate?"drag-candidate":""},dragTargetClass:function(){return this.mouseover&&this.port.isCandidate?"drag-target":""}},methods:{handlemouseenter:function(){this.mouseover=!0},handlemouseleave:function(){this.mouseover=!1}},mounted:function(){var t=this,n=e.i(o.a)().on("start",function(n){console.log("drag started for port:",t.port),t.onPortDragStart(t.port),t.dragging=!0}).on("drag",function(){t.onPortDrag(t.port,r.a)}).on("end",function(){t.onPortDragEnd(t.port),t.dragging=!1});e.i(r.b)(this.$el).call(n)}}},40:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"app"}},41:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(131),r=e.n(o);n.default={name:"home",data:function(){return{graphConfig:{nodes:[{id:"input_node",ports:[{id:"input_one",type:"output"},{id:"input_two",type:"output"},{id:"input_three",type:"output"}]},{id:"subprocess_one",ports:[{id:"arg_one",type:"input"},{id:"arg_two",type:"input"},{id:"output",type:"output"}]},{id:"subprocess_two",ports:[{id:"arg_one",type:"input"},{id:"output",type:"output"}]}],edges:[{source:{nodeId:"input_node",portId:"input_one"},target:{nodeId:"subprocess_one",portId:"arg_one"}},{source:{nodeId:"input_node",portId:"input_two"},target:{nodeId:"subprocess_two",portId:"arg_one"}},{source:{nodeId:"subprocess_two",portId:"output"},target:{nodeId:"subprocess_one",portId:"arg_two"}}],options:{nodeWidth:200,nodeHeight:40,portRadius:10,graphPadding:20}},handleConnection:function(t){console.log("connection received:",t)}}},components:{PortGraph:r.a}}}},[35]);
//# sourceMappingURL=app.ab6da8b68d39a3fda435.js.map